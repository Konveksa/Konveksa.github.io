<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>在 Icarus 中部署 Twikoo 并添加其 Widget - 红色卷王</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="红色卷王"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="红色卷王"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="本文部分内容转载自这篇文章，作者：异次元 de 机智君。"><meta property="og:type" content="blog"><meta property="og:title" content="在 Icarus 中部署 Twikoo 并添加其 Widget"><meta property="og:url" content="https://seobinggo.gq/articles/4293378149/"><meta property="og:site_name" content="红色卷王"><meta property="og:description" content="本文部分内容转载自这篇文章，作者：异次元 de 机智君。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img-1304861977.cos.ap-nanjing.myqcloud.com/img/joxil.jpg"><meta property="article:published_time" content="2021-02-24T04:51:00.000Z"><meta property="article:modified_time" content="2021-02-24T04:51:00.000Z"><meta property="article:author" content="Goblet"><meta property="article:tag" content="计算机"><meta property="article:tag" content="Icarus"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://img-1304861977.cos.ap-nanjing.myqcloud.com/img/joxil.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://seobinggo.gq/articles/4293378149/"},"headline":"红色卷王","image":["https://img-1304861977.cos.ap-nanjing.myqcloud.com/img/joxil.jpg"],"datePublished":"2021-02-24T04:51:00.000Z","dateModified":"2021-02-24T04:51:00.000Z","author":{"@type":"Person","name":"Goblet"},"description":"本文部分内容转载自这篇文章，作者：异次元 de 机智君。"}</script><link rel="canonical" href="https://seobinggo.gq/articles/4293378149/"><link rel="alternate" href="/atom.xml" title="红色卷王" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?4850bdf65b15e622a952a2617c506ce7";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-VPB34NKHML" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-VPB34NKHML');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/favicon.png" alt="红色卷王" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Test" href="/404"><i class="fas fa-vial"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://img-1304861977.cos.ap-nanjing.myqcloud.com/img/joxil.jpg" alt="在 Icarus 中部署 Twikoo 并添加其 Widget"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="fas fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-02-24</time></span><span class="level-item is-hidden-mobile"><i class="fas fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-02-24</time></span><span class="level-item"> <i class="fas fa-feather-alt"> </i> Goblet </span><span class="level-item"> <i class="fas fa-folder-open"> </i><a class="link-muted" href="/categories/%E6%8D%A3%E9%BC%93%E7%AC%94%E8%AE%B0/">捣鼓笔记</a></span><span class="level-item">15 分钟读完 (共2229字)</span></div></div><h1 class="title is-3 is-size-4-mobile">在 Icarus 中部署 Twikoo 并添加其 Widget</h1><div class="content"><article class="message message-immersive is-primary">
<div class="message-body">
<i class="fas fa-info-circle mr-2"></i>
本文部分内容转载自 <a target="_blank" rel="noopener" href="https://anzifan.com/post/icarus_to_candy_2/"> 这篇文章</a>，作者：异次元 de 机智君。
</div>
</article>
<span id="more"></span>

<h2 id="为什么选择 -Twikoo？"><a href="# 为什么选择 -Twikoo？" class="headerlink" title="为什么选择 Twikoo？"></a>为什么选择 Twikoo？</h2><p>其实 <a target="_blank" rel="noopener" href="https://www.imaegoo.com/">iMaeGoo</a>大佬在 <a target="_blank" rel="noopener" href="https://twikoo.js.org/">Twikoo 中文文档</a> 里就把理由说的非常清楚了：</p>
<blockquote>
<p>一个简洁、安全、免费的静态网站评论系统，基于腾讯云开发。</p>
</blockquote>
<p>「简洁」、「安全」、「免费」、基于国内的云服务，对于一个主体语言是中文的博客来说，还需要更多理由吗？目前的评论系统现状是：「简洁」的，不够安全；「安全」的不一定免费；「免费」的不一定在国内网络环境能很好的访问。</p>
<h2 id="Twikoo- 的特性"><a href="#Twikoo- 的特性" class="headerlink" title="Twikoo 的特性"></a>Twikoo 的特性 </h2><p> 作为一款「纯国产」的评论系统，Twikoo 很多特性对于国内博主真的很方便：</p>
<ol>
<li>采用免费的腾讯云开发，免去二次备案的时间成本；</li>
<li>通过云函数控制敏感信息，防止泄漏；</li>
<li>微信、QQ、邮件…… 多种提醒方式可选；</li>
<li>基于 Akismet 的反垃圾支持；</li>
<li>方便好用的评论管理系统和配置台，直接在博客评论区管理评论和配置其他信息；</li>
<li>博主标识、User Agent 显示、点赞系统、多级评论、支持图片、markdown、Katex 公式……；</li>
<li>活跃、友善的开发者和社区；</li>
</ol>
<p>除此之外，你还需要明白 Twikoo 是个正在成长中的评论系统，且更新频繁，你可以在这里浏览开发计划。另外，它已被腾讯云官方选为云开发优秀应用。</p>
<h2 id="部署 Twikoo 评论系统"><a href="# 部署 Twikoo 评论系统" class="headerlink" title="部署 Twikoo 评论系统"></a>部署 Twikoo 评论系统 </h2><p> 搭建 Twikoo 分两步：</p>
<ol>
<li>在本地的博客主题中配置 Twikoo；</li>
<li>在腾讯云配置环境和云函数；</li>
</ol>
<p>本文基于原版 Icarus 4.1.2。</p>
<h3 id="在本地的博客主题中配置 -Twikoo"><a href="# 在本地的博客主题中配置 -Twikoo" class="headerlink" title="在本地的博客主题中配置 Twikoo"></a>在本地的博客主题中配置 Twikoo</h3><h4 id="第一步"><a href="# 第一步" class="headerlink" title="第一步"></a>第一步 </h4><p> 在主题目录下 <code>layout/comment</code> 中创建 <code>twikoo.jsx</code> 并键入：</p>
<figure class="highlight js"><figcaption><span>twikoo.jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; Component, Fragment &#125; = <span class="built_in">require</span>(<span class="string">&#x27;inferno&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; cacheComponent &#125; = <span class="built_in">require</span>(<span class="string">&#x27;hexo-component-inferno/lib/util/cache&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Twikoo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">      envId,</span><br><span class="line">      jsUrl,</span><br><span class="line">    &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">const</span> js = <span class="string">`twikoo.init(&#123;</span></span><br><span class="line"><span class="string">      envId: &#x27;<span class="subst">$&#123;envId&#125;</span>&#x27;</span></span><br><span class="line"><span class="string">    &#125;);`</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Fragment&gt;</span><br><span class="line">        &lt;div id=<span class="string">&quot;twikoo&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content twikoo&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">        &lt;script src=&#123;jsUrl&#125;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script dangerouslySetInnerHTML=&#123;&#123; <span class="attr">__html</span>: js &#125;&#125;&gt;&lt;/script&gt;</span><br><span class="line">      &lt;/Fragment&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Twikoo.Cacheable = cacheComponent(Twikoo, <span class="string">&#x27;comment.twikoo&#x27;</span>, <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; comment &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    envId: comment.envId,</span><br><span class="line">    jsUrl: <span class="string">&#x27;https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js&#x27;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = Twikoo;</span><br></pre></td></tr></table></figure>

<h4 id="第二步"><a href="# 第二步" class="headerlink" title="第二步"></a>第二步 </h4><p> 在 <code>include/shema/comment</code>中创建 <code>twikoo.json</code> ，并键入：</p>
<figure class="highlight json"><figcaption><span>twikoo.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;$schema&quot;</span>: <span class="string">&quot;http://json-schema.org/draft-07/schema#&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;$id&quot;</span>: <span class="string">&quot;/comment/twikoo.json&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Twikoo comment plugin configurations&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;const&quot;</span>: <span class="string">&quot;twikoo&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;envId&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;envId from Tencent CloudBase&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;required&quot;</span>: [<span class="string">&quot;type&quot;</span>, <span class="string">&quot;envId&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="第三步"><a href="# 第三步" class="headerlink" title="第三步"></a>第三步 </h4><p> 在 <code>include/schema/common/comment.json</code> 中添加 <code>twikoo.json</code> 的 <code>$ref</code>：</p>
<figure class="highlight diff"><figcaption><span>comment.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">        &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">             &quot;$ref&quot;: &quot;/comment/valine.json&quot;</span><br><span class="line"><span class="addition">+        &#125;,</span></span><br><span class="line"><span class="addition">+        &#123;</span></span><br><span class="line"><span class="addition">+            &quot;$ref&quot;: &quot;/comment/twikoo.json&quot;</span></span><br><span class="line">         &#125;</span><br><span class="line">     ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="第四步"><a href="# 第四步" class="headerlink" title="第四步"></a>第四步 </h4><p> 现在你只需要在 <code>_config.yml</code> 文件中 <code>comment</code> 部分添加 Twikoo 即可，在 <code>envId</code> 后面请填写你自己的腾讯云环境 ID，这个 ID 你会在下一个板块了解如何获取，现在可以空着：</p>
<figure class="highlight yml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comment:</span></span><br><span class="line">	<span class="attr">type:</span> <span class="string">twikoo</span></span><br><span class="line">	<span class="attr">envId:</span> <span class="string">xxxxxxxxxxxxxxx</span> <span class="comment"># 腾讯云环境 ID</span></span><br><span class="line">	<span class="attr">jsUrl:</span> <span class="string">https://cdn.jsdelivr.net/npm/twikoo@x.x.x/dist/twikoo.all.min.js</span></span><br></pre></td></tr></table></figure>

<p>这里需要注意的是最后的 jsUrl ，你会发现 twikoo 后面有 @ 版本号。这个版本号应该与云函数版本号保持一致。保险起见，目前 twikoo 是需要你手动去更新这个版本号的。</p>
<p>同样，更新版本也很简单，后台更新云函数后，改版本号即可。（这里有个坑，建议每次更新版本先删除 node_modules 再点击保存并安装依赖）</p>
<h4 id="第五步（可选）"><a href="# 第五步（可选）" class="headerlink" title="第五步（可选）"></a>第五步（可选）</h4><p>给博客换上 Twikoo 访客计数。在 <code>layout/common/article.jsx</code> 中修改<code>&#123;/* Visitor counter */&#125;</code> 部分：</p>
<figure class="highlight diff"><figcaption><span>article.jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ &#123;!index ? &lt;span id=&#123;url_for(page.link || page.path)&#125; class=&quot;level-item twikoo_visitors&quot; data-flag-title=&#123;page.title&#125; dangerouslySetInnerHTML=&#123;&#123;</span></span><br><span class="line"><span class="deletion">-	&#123;!index &amp;&amp; plugins &amp;&amp; plugins.busuanzi === true ? &lt;span class=&quot;level-item&quot; id=&quot;busuanzi_container_page_pv&quot; dangerouslySetInnerHTML=&#123;&#123; __html: _p(&#x27;plugin.visit_count&#x27;, &#x27;&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;0&lt;/span&gt;&#x27;)</span></span><br><span class="line"><span class="addition">+	__html: &#x27;&lt;i class=&quot;far fa-eye&quot;&gt;&lt;/i&gt;&#x27; + _p(&#x27;plugin.visit_count&#x27;, &#x27;&amp;nbsp;&amp;nbsp;&lt;span id=&quot;twikoo_visitors&quot;&gt;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&lt;/span&gt;&#x27;)</span></span><br><span class="line">&#125;&#125;&gt;&lt;/span&gt; : null&#125;</span><br></pre></td></tr></table></figure>

<p>本地需要修改的部分完成。</p>
<h3 id="在腾讯云配置环境和云函数"><a href="# 在腾讯云配置环境和云函数" class="headerlink" title="在腾讯云配置环境和云函数"></a>在腾讯云配置环境和云函数 </h3><p> 使用云开发作为评论后台，每个云开发用户均长期享受 1 个免费的标准型基础版 1 资源套餐，换句话说对于大部分博主来说是免费的。</p>
<p>以下引用自<a target="_blank" rel="noopener" href="https://twikoo.js.org/">Twikoo 中文文档</a>。</p>
<ol>
<li>进入 <a target="_blank" rel="noopener" href="https://curl.qcloud.com/KnnJtUom"> 云开发 CloudBase</a>活动页面，滚动到 “新用户专享” 部分，选择适合的套餐（一般 0 元套餐即可），点击 “立即购买”，按提示创建好环境。<ul>
<li>提示<ol>
<li>推荐创建上海环境。如选择广州环境，需要在 <code>twikoo.init()</code> 时额外指定环境 <code>region: &quot;ap-guangzhou&quot;</code></li>
<li>环境名称自由填写</li>
<li>推荐选择计费方式 <code>包年包月 </code>，套餐版本<code> 基础版 1</code>，超出免费额度不会收费</li>
<li>如果提示选择 “应用模板”，请选择 “空模板”</li>
</ol>
</li>
</ul>
</li>
<li>进入 <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/"> 云开发控制台</a></li>
<li>复制环境 ID，在上一板块中的第四步填写。</li>
<li>进入 <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/env/login"> 环境 - 登陆授权</a>，启用 “匿名登录”</li>
<li>进入 <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/env/safety"> 环境 - 安全配置</a>，将网站域名添加到 “WEB 安全域名”</li>
<li>进入 <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/scf/index"> 环境 - 云函数</a>，点击 “新建云函数”</li>
<li>函数名称请填写：<code>twikoo</code>，创建方式请选择：<code>空白函数</code>，运行环境请选择：<code>Nodejs 10.15</code>，函数内存请选择：<code>128MB</code>，点击 “下一步”</li>
<li>清空输入框中的示例代码，复制以下代码、粘贴到 “函数代码” 输入框中，点击 “确定”</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.main = <span class="built_in">require</span>(<span class="string">&#x27;twikoo-func&#x27;</span>).main</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>创建完成后，点击 “twikoo“进入云函数详情页，进入 “函数代码” 标签，点击 “文件 - 新建文件”，输入 <code>package.json</code>，回车</li>
<li>复制以下代码、粘贴到代码框中，点击 “保存并安装依赖”（下面的版本号请自行参照文档更新）</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">&quot;dependencies&quot;</span>: &#123; <span class="attr">&quot;twikoo-func&quot;</span>: <span class="string">&quot;1.2.0&quot;</span> &#125; &#125;</span><br></pre></td></tr></table></figure>

<p>成功了！你给自己的 Icarus 博客换上了崭崭新的 Twikoo 评论，接下来看看如何管理和配置。</p>
<h2 id="配置、管理你的 -Twikoo- 评论系统"><a href="# 配置、管理你的 -Twikoo- 评论系统" class="headerlink" title="配置、管理你的 Twikoo 评论系统"></a>配置、管理你的 Twikoo 评论系统</h2><ol>
<li>进入 <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/env/login"> 环境 - 登陆授权</a>，点击 “自定义登录” 右边的 “私钥下载”，下载私钥文件</li>
<li>用文本编辑器打开私钥文件，复制全部内容</li>
<li>你只需要来到最下面的评论区，点击小齿轮即可配置更多设置，当然博主是需要登录的，初次进入需要粘贴私钥文件内容，并设置管理员密码。</li>
</ol>
<h2 id="添加“最新评论”Widget"><a href="# 添加“最新评论”Widget" class="headerlink" title="添加“最新评论”Widget"></a>添加“最新评论”Widget</h2><p>本部分参考了 <a target="_blank" rel="noopener" href="https://github.com/imaegoo/hexo-theme-icarus/commit/39d5093137bdba69910778afda91903b5a33629a"> 支持显示 Twikoo 最新评论 · imaegoo/hexo-theme-icarus@39d5093 · GitHub</a>，在此向作者表示感谢。</p>
<h3 id="第一步 -1"><a href="# 第一步 -1" class="headerlink" title="第一步"></a>第一步 </h3><p> 在<code>include/schema/common/widgets.json</code>中做如下修改：</p>
<figure class="highlight diff"><figcaption><span>widgets.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">            &#123;</span><br><span class="line">                &quot;$ref&quot;: &quot;/widget/subscribe_email.json&quot;</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="addition">+           &#123;</span></span><br><span class="line"><span class="addition">+               &quot;$ref&quot;: &quot;/widget/twikoo_new.json&quot;</span></span><br><span class="line"><span class="addition">+           &#125;,</span></span><br><span class="line">            &#123;</span><br><span class="line">                &quot;$ref&quot;: &quot;/widget/adsense.json&quot;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二步 -1"><a href="# 第二步 -1" class="headerlink" title="第二步"></a>第二步 </h3><p> 在<code>include/schema/widget</code>目录新建 <code>twikoo_new.json</code> 文件，内容为：</p>
<figure class="highlight json"><figcaption><span>twikoo_new.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;$schema&quot;</span>: <span class="string">&quot;http://json-schema.org/draft-07/schema#&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;$id&quot;</span>: <span class="string">&quot;/widget/twikoo_new.json&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;Twikoo new comment widget configurations&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;object&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;const&quot;</span>: <span class="string">&quot;twikoo_new&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;envId&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;envId from Tencent CloudBase&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;required&quot;</span>: [<span class="string">&quot;type&quot;</span>, <span class="string">&quot;envId&quot;</span>]</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="第三步 -1"><a href="# 第三步 -1" class="headerlink" title="第三步"></a>第三步 </h3><p> 在<code>layout/widget</code>目录新建 <code>twikoo_new.jsx</code> 文件，内容为：</p>
<figure class="highlight js"><figcaption><span>twikoo_new.jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; Component &#125; = <span class="built_in">require</span>(‘inferno’);</span><br><span class="line"><span class="keyword">const</span> &#123; cacheComponent &#125; = <span class="built_in">require</span>(‘hexo-component-inferno/lib/util/cache’);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TwikooNew</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; envId &#125; = <span class="built_in">this</span>.props;</span><br><span class="line">    <span class="keyword">const</span> js = <span class="string">`window.twikooEnvId = &#x27;<span class="subst">$&#123;envId&#125;</span>&#x27;;`</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=“card widget” id=“twikoo-<span class="keyword">new</span>”&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=“card-content”&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=“menu”&gt;</span><br><span class="line">            &lt;h3 <span class="class"><span class="keyword">class</span></span>=“menu-label”&gt; 最新评论 &lt;/h3&gt;</span><br><span class="line">            &lt;script dangerouslySetInnerHTML=&#123;&#123; <span class="attr">__html</span>: js &#125;&#125;&gt;&lt;/script&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=“twikoo-<span class="keyword">new</span>-container”&gt;&lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TwikooNew.Cacheable = cacheComponent(TwikooNew, ‘widget.twikoonew’, <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; widget &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> &#123; envId &#125; = widget;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    envId: <span class="string">&#x27;xxxxxxxxxxxxxxxxx&#x27;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = TwikooNew;</span><br></pre></td></tr></table></figure>
<p>注意把 <code>xxxxxxxxxxxxxxxxx</code> 替换为自己的腾讯云环境 ID。</p>
<h3 id="第四步 -1"><a href="# 第四步 -1" class="headerlink" title="第四步"></a>第四步 </h3><p> 在<code>include/style</code>中的任意一个 <code>.styl</code> 中添加如下内容：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.twikoo-new-<span class="attribute">content</span></span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    -webkit-line-clamp: 2;</span><br><span class="line">    -webkit-box-orient: vertical;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br></pre></td></tr></table></figure>

<h3 id="第五步"><a href="# 第五步" class="headerlink" title="第五步"></a>第五步 </h3><p> 在<code>layout/common/scripts.jsx</code>中做如下修改：</p>
<figure class="highlight diff"><figcaption><span>scripts.jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">return &lt;Fragment&gt;</span><br><span class="line">            &lt;script src=&#123;cdn(&#x27;jquery&#x27;, &#x27;3.3.1&#x27;, &#x27;dist/jquery.min.js&#x27;)&#125;&gt;&lt;/script&gt;</span><br><span class="line">            &lt;script src=&#123;cdn(&#x27;moment&#x27;, &#x27;2.22.2&#x27;, &#x27;min/moment-with-locales.min.js&#x27;)&#125;&gt;&lt;/script&gt;</span><br><span class="line"><span class="addition">+           &#123;config.comment.jsUrl &amp;&amp; &lt;script src=&#123;config.comment.jsUrl&#125;&gt;&lt;/script&gt;&#125;</span></span><br><span class="line">            &#123;clipboard &amp;&amp; &lt;script src=&#123;cdn(&#x27;clipboard&#x27;, &#x27;2.0.4&#x27;, &#x27;dist/clipboard.min.js&#x27;)&#125; defer&gt;&lt;/script&gt;&#125;</span><br><span class="line">            &lt;script dangerouslySetInnerHTML=&#123;&#123; __html: `moment.locale(&quot;$&#123;language&#125;&quot;);` &#125;&#125;&gt;&lt;/script&gt;</span><br><span class="line">            &lt;script dangerouslySetInnerHTML=&#123;&#123; __html: embeddedConfig &#125;&#125;&gt;&lt;/script&gt;</span><br><span class="line">            &lt;script src=&#123;url_for(&#x27;/js/column.js&#x27;)&#125;&gt;&lt;/script&gt;</span><br><span class="line">            &lt;Plugins site=&#123;site&#125; config=&#123;config&#125; page=&#123;page&#125; helper=&#123;helper&#125; head=&#123;false&#125; /&gt;</span><br><span class="line">            &lt;script src=&#123;url_for(&#x27;/js/main.js&#x27;)&#125; defer&gt;&lt;/script&gt;</span><br><span class="line">        &lt;/Fragment&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="第六步"><a href="# 第六步" class="headerlink" title="第六步"></a>第六步 </h3><p> 修改<code>source/js/main.js</code>，添加如下内容：</p>
<figure class="highlight js"><figcaption><span>main.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadTwikooNewComment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> twikooOrgPaths = [<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;/api.html&#x27;</span>, <span class="string">&#x27;/cms.html&#x27;</span>, <span class="string">&#x27;/configuration.html&#x27;</span>, <span class="string">&#x27;/faq.html&#x27;</span>, <span class="string">&#x27;/link.html&#x27;</span>, <span class="string">&#x27;/quick-start.html&#x27;</span>];</span><br><span class="line">    <span class="keyword">var</span> twikooNewEl = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;twikoo-new-container&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (twikooNewEl.length === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    twikoo.getRecentComments(&#123;</span><br><span class="line">      envId: <span class="built_in">window</span>.twikooEnvId,</span><br><span class="line">      pageSize: <span class="number">5</span>,</span><br><span class="line">      includeReply: <span class="literal">true</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> innerHTML = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> idx1 = <span class="number">0</span>; idx1 &lt; res.length; idx1++) &#123;</span><br><span class="line">        <span class="keyword">var</span> item = res[idx1];</span><br><span class="line">        <span class="keyword">if</span> (!item.commentText.trim()) <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> (twikooOrgPaths.indexOf(item.url) !== -<span class="number">1</span>) item.url = <span class="string">&#x27;https://twikoo.js.org&#x27;</span> + item.url;</span><br><span class="line">        innerHTML += <span class="string">&#x27;&lt;article class=&quot;media&quot;&gt;&lt;div class=&quot;media-content&quot;&gt;&#x27;</span></span><br><span class="line">          + <span class="string">&#x27;&lt;p class=&quot;title twikoo-new-content&quot;&gt;&lt;a href=&quot;&#x27;</span> + item.url + <span class="string">&#x27;#&#x27;</span> + item.id + <span class="string">&#x27;&quot;&gt;&#x27;</span> + changeContent(item.commentText) + <span class="string">&#x27;&lt;/a&gt;&lt;/p&gt;&#x27;</span></span><br><span class="line">          + <span class="string">&#x27;&lt;p class=&quot;date&quot;&gt;&#x27;</span> + item.nick + <span class="string">&#x27; / &#x27;</span> + item.relativeTime + <span class="string">&#x27;&lt;/p&gt;&#x27;</span></span><br><span class="line">          + <span class="string">&#x27;&lt;/div&gt;&lt;/article&gt;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> idx2 = <span class="number">0</span>; idx2 &lt; twikooNewEl.length; idx2++) &#123;</span><br><span class="line">        twikooNewEl[idx2].innerHTML = innerHTML;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.error(err);</span><br><span class="line">      twikooNewEl.innerHTML = <span class="string">&#x27; 加载失败 &#x27;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 从 butterfly 主题借鉴</span></span><br><span class="line">  <span class="comment">// https://github.com/jerryc127/hexo-theme-butterfly/blob/dev/layout/includes/third-party/newest-comments/twikoo-comment.pug</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeContent</span> (<span class="params">content</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (content === <span class="string">&#x27;&#x27;</span>) <span class="keyword">return</span> content;</span><br><span class="line">    content = content.replace(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="string">&#x27;&#x27;</span>); <span class="comment">// remove html tag</span></span><br><span class="line">    <span class="keyword">if</span> (content.length &gt; <span class="number">150</span>) &#123;</span><br><span class="line">      content = content.substring(<span class="number">0</span>, <span class="number">150</span>) + <span class="string">&#x27;...&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> content;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  loadTwikooNewComment();</span><br></pre></td></tr></table></figure>

<h3 id="第七步"><a href="# 第七步" class="headerlink" title="第七步"></a>第七步 </h3><p> 在 Icarus 的 <code>_config.yml</code> 中增加一个名为 <code>twikoo_new</code> 的 Widget 并进行配置，如：</p>
<figure class="highlight yml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Recent comments widget configurations</span></span><br><span class="line"><span class="bullet">-</span></span><br><span class="line">        <span class="comment"># Where should the widget be placed, left sidebar or right sidebar</span></span><br><span class="line">        <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">twikoo_new</span></span><br><span class="line">        <span class="attr">envId:</span> <span class="string">xxxxxxxxxxxxxxxxx</span> <span class="comment"># 腾讯云环境 ID</span></span><br></pre></td></tr></table></figure>

<p>上面的代码就是本站“最新评论”Widget 的配置。</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>在 Icarus 中部署 Twikoo 并添加其 Widget</p><p><a href="https://seobinggo.gq/articles/4293378149/">https://seobinggo.gq/articles/4293378149/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Goblet</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-02-24</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-02-24</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a><a class="" rel="noopener" target="_blank" title="CC BY-NC 4.0" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a><a class="link-muted mr-2" rel="tag" href="/tags/Icarus/">Icarus</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/articles/0879673655/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">中国对五共的报道节选：1026 与西比西比</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/articles/3019072948/"><span class="level-item">空输之歌《黑色贝雷帽》</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content twikoo" id="twikoo"></div><script src="https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js"></script><script>twikoo.init({
      envId: 'twikoo-6g3gimneed51ecc4'
    });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://img-1304861977.cos.ap-nanjing.myqcloud.com/img/9texh.jpg" alt="红色卷王"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">红色卷王</p><p class="is-size-6 is-block">记录学习生活，传播共产主义</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国 · 北京</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">9</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="/about" target="_blank" rel="noopener">关于我们</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Mail" href="mailto:admin@seobinggo.gq"><i class="fab fa-envira"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Wechat" href="/about"><i class="fab fa-weixin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E5%8D%8A%E5%B2%9B%E6%8B%BE%E9%81%97/"><span class="level-start"><span class="level-item">半岛拾遗</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%80%AA%E5%8A%9B%E4%B9%B1%E7%A5%9E/"><span class="level-start"><span class="level-item">怪力乱神</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%89%80%E6%80%9D%E6%89%80%E6%83%B3/"><span class="level-start"><span class="level-item">所思所想</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8D%A3%E9%BC%93%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">捣鼓笔记</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9D%83%E5%A8%81%E6%84%8F%E8%A7%81/"><span class="level-start"><span class="level-item">权威意见</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Icarus/"><span class="tag">Icarus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%94%E5%AD%A6/"><span class="tag">五学</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A6%87%E5%A5%B3/"><span class="tag">妇女</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%95%E6%96%87/"><span class="tag">引文</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8A%A5%E9%81%93%E8%8A%82%E9%80%89/"><span class="tag">报道节选</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%9D%E9%B2%9C/"><span class="tag">朝鲜</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%90%86%E8%AE%BA/"><span class="tag">理论</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/"><span class="tag">计算机</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E7%AC%94/"><span class="tag">随笔</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9F%A9%E5%9B%BD/"><span class="tag">韩国</span><span class="tag">5</span></a></div></div></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-23T11:06:04.000Z">2021-03-23</time></p><p class="title"><a href="/articles/5876208644/">中国对五共的报道节选：517 戒严与光州民主运动 (1)</a></p><p class="categories"><a href="/categories/%E5%8D%8A%E5%B2%9B%E6%8B%BE%E9%81%97/">半岛拾遗</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-21T13:42:05.000Z">2021-03-21</time></p><p class="title"><a href="/articles/3540140558/">引文：朝核问题的历史演进与前景展望</a></p><p class="categories"><a href="/categories/%E6%9D%83%E5%A8%81%E6%84%8F%E8%A7%81/">权威意见</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-21T02:14:05.000Z">2021-03-21</time></p><p class="title"><a href="/articles/9426724235/">绝望的骑士</a></p><p class="categories"><a href="/categories/%E6%80%AA%E5%8A%9B%E4%B9%B1%E7%A5%9E/">怪力乱神</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-08T04:00:00.000Z">2021-03-08</time></p><p class="title"><a href="/articles/3789645109/">不蜗田园，走进田间，妇女能顶半边天</a></p><p class="categories"><a href="/categories/%E6%89%80%E6%80%9D%E6%89%80%E6%83%B3/">所思所想</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-02T04:00:00.000Z">2021-03-02</time></p><p class="title"><a href="/articles/0879673655/">中国对五共的报道节选：1026 与西比西比</a></p><p class="categories"><a href="/categories/%E5%8D%8A%E5%B2%9B%E6%8B%BE%E9%81%97/">半岛拾遗</a></p></div></article></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#为什么选择 -Twikoo？"><span class="level-left"><span class="level-item">1</span><span class="level-item">为什么选择 Twikoo？</span></span></a></li><li><a class="level is-mobile" href="#Twikoo- 的特性"><span class="level-left"><span class="level-item">2</span><span class="level-item">Twikoo 的特性 </span></span></a></li><li><a class="level is-mobile" href="#部署 Twikoo 评论系统"><span class="level-left"><span class="level-item">3</span><span class="level-item">部署 Twikoo 评论系统 </span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#在本地的博客主题中配置 -Twikoo"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">在本地的博客主题中配置 Twikoo</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#第一步"><span class="level-left"><span class="level-item">3.1.1</span><span class="level-item">第一步 </span></span></a></li><li><a class="level is-mobile" href="#第二步"><span class="level-left"><span class="level-item">3.1.2</span><span class="level-item">第二步 </span></span></a></li><li><a class="level is-mobile" href="#第三步"><span class="level-left"><span class="level-item">3.1.3</span><span class="level-item">第三步 </span></span></a></li><li><a class="level is-mobile" href="#第四步"><span class="level-left"><span class="level-item">3.1.4</span><span class="level-item">第四步 </span></span></a></li><li><a class="level is-mobile" href="#第五步（可选）"><span class="level-left"><span class="level-item">3.1.5</span><span class="level-item">第五步（可选）</span></span></a></li></ul></li><li><a class="level is-mobile" href="#在腾讯云配置环境和云函数"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">在腾讯云配置环境和云函数 </span></span></a></li></ul></li><li><a class="level is-mobile" href="#配置、管理你的 -Twikoo- 评论系统"><span class="level-left"><span class="level-item">4</span><span class="level-item">配置、管理你的 Twikoo 评论系统</span></span></a></li><li><a class="level is-mobile" href="#添加“最新评论”Widget"><span class="level-left"><span class="level-item">5</span><span class="level-item">添加“最新评论”Widget</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#第一步 -1"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">第一步 </span></span></a></li><li><a class="level is-mobile" href="#第二步 -1"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">第二步 </span></span></a></li><li><a class="level is-mobile" href="#第三步 -1"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">第三步 </span></span></a></li><li><a class="level is-mobile" href="#第四步 -1"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">第四步 </span></span></a></li><li><a class="level is-mobile" href="#第五步"><span class="level-left"><span class="level-item">5.5</span><span class="level-item">第五步 </span></span></a></li><li><a class="level is-mobile" href="#第六步"><span class="level-left"><span class="level-item">5.6</span><span class="level-item">第六步 </span></span></a></li><li><a class="level is-mobile" href="#第七步"><span class="level-left"><span class="level-item">5.7</span><span class="level-item">第七步 </span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" id="twikoo-new"><div class="card-content"><div class="menu"><h3 class="menu-label">最新评论</h3><script>window.twikooEnvId = 'twikoo-6g3gimneed51ecc4';</script><div class="twikoo-new-container"></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=seobinggo/lwzs&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="seobinggo/lwzs" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/favicon.png" alt="红色卷王" height="28"></a><p class="is-size-7"><span>&copy; 2021 Goblet</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/twikoo@1.2.0/dist/twikoo.all.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>